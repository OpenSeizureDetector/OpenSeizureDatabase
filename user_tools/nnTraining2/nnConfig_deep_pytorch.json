{
    "debug": false,
    "randomSeed": 42,

    "osdbConfig": {
        "_cacheDir": ".",
        "osdbFiles_desc": "List of Open Seizure Database files to be used as input for the data preparation",
        "osdbFiles": [
            "osdb_3min_allSeizures.json",
            "osdb_3min_ndaEvents.json",
            "osdb_3min_falseAlarms.json"
        ]
    },

    "dataFileNames": {
        "allDataFileJson": "allData.json",
        "allDataFileCsv": "allData.csv",
        "testDataFileCsv": "testData.csv",
        "testBalancedFileCsv": "testDataBalanced.csv",
        "trainDataFileCsv": "trainData.csv",
        "valDataFileCsv": "valData.csv",
        "trainAugmentedFileCsv": "trainDataAugmented.csv",
        "trainFeaturesFileCsv": "trainFeatures.csv",
        "testFeaturesFileCsv": "testFeatures.csv",
        "trainFeaturesHistoryFileCsv": "trainDataFeaturesHistory.csv",
        "testFeaturesHistoryFileCsv": "testDataFeaturesHistory.csv"
    },

    "eventFilters": {
        "includeUserIds": [],
        "excludeUserIds": [],
        "includeTypes": [],
        "excludeTypes": [],
        "includeSubTypes": [],
        "excludeSubTypes": [ "Check", "check", "unknown", "Unknown", "null", "Null"],
        "includeDataSources": [],
        "excludeDataSources": ["Phone", "AndroidWear"],
        "includeText": [],
        "excludeText": [],
        "requireHrData": false,
        "requireO2SatData": false,
        "require3dData": false
    },

    "dataProcessing": {
        "addFeatureHistoryLength": 0,
        "window": 125,
        "step": 125,
        "oversample": "none",
        "undersample": "none",
        "worker_count": null,
        "batch_size": 1000,
        "stream_chunksize": 20000,
        "stream_low_memory": false,
        "stream_dtype_map": null,
        "noiseAugmentation": true,
        "noiseAugmentationFactor": 10,
        "noiseAugmentationValue": 30.0,
        "phaseAugmentation": true,
        "phaseAugmentationStep": 5,
        "userAugmentation": false,
        "splitTestTrainByEvent": true,
        "accSdThreshold": 5.0,
        "testProp": 0.3,
        "validationProp": 0.0,
        "features": ["acc_magnitude"],
        "simpleMagnitudeOnly": true,
        "validateDatapoints": true,
        "highPassFreq": null,
        "highPassOrder": 2
    },

    "modelConfig": {
        "framework": "pytorch",
        "modelFname": "deepEpiCnnModel_pytorch",
        "modelClass": "user_tools.nnTraining2.deepEpiCnnModel_torch.DeepEpiCnnModelPyTorch",
        "sampleFreq": 25,
        "bufferSeconds": 30,
        "epochs": 100,
        "batchSize": 512,
        "nLayers": 14,
        "convDropout": 0.05,
        "denseDropout": 0.025,
        "lrFactor": 0.1,
        "lrPatience": 5,
        "lrStart": 1e-6,
        "lrMin": 1e-7,
        "earlyStoppingPatience": 6,
        "trainingVerbosity": 1,
        "dims": 1,
        "_comment_lr_schedule": "Set useLrSchedule to true to enable Spahr et al. 2025 three-phase learning rate schedule",
        "useLrSchedule": true,
        "useAdamW": true,
        "adamwBeta1": 0.9,
        "adamwBeta2": 0.999,
        "weightDecay": 0.0001,
        "lrPeak": 0.0001,
        "lrMainEnd": 0.00003,
        "warmupSteps": 2500,
        "mainSteps": 75000,
        "cooldownSteps": 2500,
        "totalTrainingSteps": 80000,
        "_comment_eval": "Evaluation and checkpointing settings",
        "evalEverySteps": 5000,
        "saveBestOnBothImprovement": true,
        "saveBestOnFarReduction": 0.05,
        "saveBestOnSensitivityTolerance": 0.2,
        "saveBestMinSensitivity": 0.25,
        "_comment_model_selection": "Model selection criteria - prevents saving models with poor FPR/TPR balance",
        "saveBestMaxFpr": 0.015,
        "modelSelectionMetric": "min_fpr",
        "fBeta": 2.0,
        "_comment_metrics": "modelSelectionMetric options: 'dual_improvement', 'f1', 'f_beta', 'youden', 'min_fpr'. 'min_fpr' minimizes FPR while maintaining minimum sensitivity (saveBestMinSensitivity). saveBestMaxFpr enforces maximum false positive rate.",
        "_comment_batches": "Set useBalancedBatches to true for Spahr et al. 2025 balanced batch sampling",
        "useBalancedBatches": true
    }
}
